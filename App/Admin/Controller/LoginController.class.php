<?phpnamespace Admin\Controller;class LoginController extends CommonController {    public function index() {        layout(false);        if (IS_POST) {            $User = D("User");            if (!$data = $User->create(I('post.'), 4)) {                $this->error($User->getError(), U("index"));            } else {                //验证码                $verify = new \Think\Verify();                if (!$verify->check(I("verify"))) {                    $this->error('验证码错误', U("index"));                }                $user = $User->where(array("username" => $data["username"]))->find();                $mypwd = getencrypt($data['pwd'], $user['encrypt_key']);                if (!$user || $user['pwd'] != $mypwd) {                    $this->error('用户名或密码错误', U("index"));                }                if ($user['is_delete'] == 1) {                    $this->error('无效用户', U("index"));                }                unset($data);                //登录成功                $data['user_id'] = $user['user_id'];                $data['loginip'] = get_client_ip();                $data['logintime'] = NOW_TIME;                $User->save($data);                //存入session                session('uid', $user['id']);                session('nickname', $user['nickname']);                session('headimgurl', $user['headimgurl']);                session('username', $user['username']);                $this->redirect('Index/index');            }        }        $this->display();    }    public function verify() {        $Verify = new \Think\Verify(C('VERIFY_CONFIG'));        $Verify->entry();    }    public function logout()    {        session('uid',null);        $this->redirect('Login/index');    }}