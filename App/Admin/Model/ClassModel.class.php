<?phpnamespace Admin\Model;use Think\Model;class ClassModel extends Model{    protected  $_validate=array(        array('name','require','名称必须！'),        array('school_id','require','请选择学校！'),    );    protected function _after_select(&$resultSet, $options) {        foreach($resultSet as &$result)        {            if(false===$this->_after_find($result, $options))            {                return false;            }        }    }    protected function _after_find(&$result, $options) {                $result['sname']=M('School')->getFieldById($result['school_id'],'name');    }    protected function _before_delete($options) {        $ids    = $this->where($options['where'])->getField('id,id,name');//        $Class  = M('Class');//        foreach ($ids as $id=>$field)//        {//            $map['school_id']=$id;//            if($Class->where($map)->count())//            {//                $this->error=$field['name'].'中存在班级';//                return false;//            }            //        }    }   }