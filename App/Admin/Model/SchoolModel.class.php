<?phpnamespace Admin\Model;use Think\Model;class SchoolModel extends Model{    protected  $_validate=array(        array('name','require','名称必须！'),        array('area_id','require','请选择区域！'),    );    protected function _after_select(&$resultSet, $options) {        foreach($resultSet as &$result)        {            if(false===$this->_after_find($result, $options))            {                return false;            }        }    }    protected function _after_find(&$result, $options) {                $result['aname']=M('Area')->getFieldById($result['area_id'],'name');    }    protected function _before_delete($options) {        $ids    = $this->where($options['where'])->getField('id,id,name');        $Class  = M('Class');        foreach ($ids as $id=>$field)        {            $map['school_id']=$id;            if($Class->where($map)->count())            {                $this->error=$field['name'].'中存在班级';                return false;            }                    }    }   }